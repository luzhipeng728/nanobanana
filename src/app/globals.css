/* 手绘风格字体 + 科技感字体 + Inter */
@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');

@import "tailwindcss";
@import '@xyflow/react/dist/style.css';

/* ========================================
   主题系统 - 三套主题 CSS 变量
   ======================================== */

/* ----------------------------------------
   Light Theme - 明亮清新风格
   ---------------------------------------- */
:root.theme-light {
  /* 画布背景 */
  --canvas-bg: #fdfbf7;
  --canvas-dot-color: rgba(0, 0, 0, 0.08);

  /* 节点基础 */
  --node-bg: rgba(255, 255, 255, 0.95);
  --node-bg-hover: rgba(255, 255, 255, 1);
  --node-border: rgba(0, 0, 0, 0.08);
  --node-border-hover: rgba(0, 0, 0, 0.15);
  --node-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  --node-shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
  --node-radius: 16px;

  /* 文字颜色 */
  --text-primary: #1a1a1a;
  --text-secondary: rgba(26, 26, 26, 0.7);
  --text-tertiary: rgba(26, 26, 26, 0.5);
  --text-accent: #6366f1;

  /* 表单控件 */
  --input-bg: rgba(0, 0, 0, 0.03);
  --input-border: rgba(0, 0, 0, 0.1);
  --input-border-focus: #6366f1;
  --input-shadow-focus: 0 0 0 3px rgba(99, 102, 241, 0.1);

  /* 按钮 */
  --btn-primary-bg: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  --btn-primary-text: #ffffff;
  --btn-secondary-bg: rgba(0, 0, 0, 0.05);
  --btn-secondary-text: #1a1a1a;

  /* 装饰效果 */
  --glow-primary: none;
  --accent-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);

  /* 标签颜色 */
  --label-text: rgba(0, 0, 0, 0.6);
  --label-dot: #6366f1;

  /* 分隔线 */
  --divider-color: rgba(0, 0, 0, 0.08);

  /* 字体 */
  --font-heading: 'Inter', -apple-system, sans-serif;
  --font-body: 'Inter', -apple-system, sans-serif;
}

/* ----------------------------------------
   Neo-Cyber Theme - 赛博朋克霓虹风格
   ---------------------------------------- */
:root.theme-neo-cyber {
  /* 画布背景 */
  --canvas-bg: #050508;
  --canvas-dot-color: rgba(0, 245, 255, 0.15);

  /* 节点基础 */
  --node-bg: rgba(10, 10, 18, 0.95);
  --node-bg-hover: rgba(15, 15, 25, 0.98);
  --node-border: rgba(0, 245, 255, 0.2);
  --node-border-hover: rgba(0, 245, 255, 0.4);
  --node-shadow: 0 0 30px rgba(0, 245, 255, 0.15), 0 0 60px rgba(191, 0, 255, 0.1);
  --node-shadow-hover: 0 0 40px rgba(0, 245, 255, 0.25), 0 0 80px rgba(191, 0, 255, 0.15);
  --node-radius: 16px;

  /* 文字颜色 */
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.4);
  --text-accent: #00f5ff;

  /* 表单控件 */
  --input-bg: rgba(10, 10, 18, 1);
  --input-border: rgba(255, 255, 255, 0.1);
  --input-border-focus: rgba(0, 245, 255, 0.5);
  --input-shadow-focus: 0 0 20px rgba(0, 245, 255, 0.15), inset 0 0 20px rgba(0, 245, 255, 0.05);

  /* 按钮 */
  --btn-primary-bg: linear-gradient(135deg, #00f5ff 0%, #0066ff 100%);
  --btn-primary-text: #000000;
  --btn-secondary-bg: rgba(255, 255, 255, 0.05);
  --btn-secondary-text: #ffffff;

  /* 装饰效果 - 霓虹发光 */
  --glow-primary: 0 0 20px rgba(0, 245, 255, 0.4);
  --accent-gradient: linear-gradient(135deg, #00f5ff 0%, #bf00ff 50%, #ff00aa 100%);

  /* 标签颜色 */
  --label-text: rgba(0, 245, 255, 0.8);
  --label-dot: #00f5ff;

  /* 分隔线 */
  --divider-color: rgba(255, 255, 255, 0.1);

  /* 字体 - 科技感 */
  --font-heading: 'Orbitron', 'Rajdhani', sans-serif;
  --font-body: 'Rajdhani', sans-serif;

  /* Neo-Cyber 专属变量 */
  --cyber-bg: #0a0a0f;
  --cyber-surface: rgba(15, 15, 25, 0.85);
  --cyber-surface-light: rgba(25, 25, 40, 0.9);
  --cyber-border: rgba(100, 100, 150, 0.2);
  --neon-cyan: #00f5ff;
  --neon-purple: #bf00ff;
  --neon-pink: #ff00aa;
  --neon-blue: #0066ff;
  --neon-green: #00ff88;
  --neon-orange: #ff6b00;
  --glow-cyan: 0 0 20px rgba(0, 245, 255, 0.4);
  --glow-purple: 0 0 20px rgba(191, 0, 255, 0.4);
  --glow-pink: 0 0 20px rgba(255, 0, 170, 0.4);
}

/* ----------------------------------------
   Glass Dark Theme - 暗色玻璃质感 (AI 无限流)
   ---------------------------------------- */
:root.theme-glass-dark {
  /* 画布背景 */
  --canvas-bg: #080808;
  --canvas-dot-color: rgba(255, 255, 255, 0.04);

  /* 节点基础 - 玻璃质感 */
  --node-bg: rgba(26, 26, 26, 0.8);
  --node-bg-hover: rgba(32, 32, 32, 0.85);
  --node-border: rgba(255, 255, 255, 0.08);
  --node-border-hover: rgba(255, 255, 255, 0.15);
  --node-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
  --node-shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.5);
  --node-radius: 20px;

  /* 文字颜色 - 白色透明度层级 */
  --text-primary: rgba(255, 255, 255, 1);
  --text-secondary: rgba(255, 255, 255, 0.6);
  --text-tertiary: rgba(255, 255, 255, 0.3);
  --text-accent: #ffffff;

  /* 表单控件 */
  --input-bg: rgba(255, 255, 255, 0.05);
  --input-border: rgba(255, 255, 255, 0.08);
  --input-border-focus: rgba(255, 255, 255, 0.2);
  --input-shadow-focus: 0 0 0 2px rgba(255, 255, 255, 0.05);

  /* 按钮 */
  --btn-primary-bg: rgba(255, 255, 255, 1);
  --btn-primary-text: #000000;
  --btn-secondary-bg: rgba(255, 255, 255, 0.08);
  --btn-secondary-text: rgba(255, 255, 255, 0.9);

  /* 装饰效果 - 极简无发光 */
  --glow-primary: none;
  --accent-gradient: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);

  /* 标签颜色 */
  --label-text: rgba(255, 255, 255, 0.5);
  --label-dot: rgba(255, 255, 255, 0.3);

  /* 分隔线 */
  --divider-color: rgba(255, 255, 255, 0.06);

  /* 字体 - 极简现代 */
  --font-heading: 'Inter', -apple-system, sans-serif;
  --font-body: 'Inter', -apple-system, sans-serif;

  /* Glass Dark 专属变量 */
  --glass-blur: 20px;
  --glass-bg: rgba(26, 26, 26, 0.8);
  --glass-border: 1px solid rgba(255, 255, 255, 0.08);
}

/* 默认主题 (neo-cyber) */
:root {
  /* 画布背景 */
  --canvas-bg: #050508;
  --canvas-dot-color: rgba(0, 245, 255, 0.15);

  /* 节点基础 */
  --node-bg: rgba(10, 10, 18, 0.95);
  --node-bg-hover: rgba(15, 15, 25, 0.98);
  --node-border: rgba(0, 245, 255, 0.2);
  --node-border-hover: rgba(0, 245, 255, 0.4);
  --node-shadow: 0 0 30px rgba(0, 245, 255, 0.15), 0 0 60px rgba(191, 0, 255, 0.1);
  --node-shadow-hover: 0 0 40px rgba(0, 245, 255, 0.25), 0 0 80px rgba(191, 0, 255, 0.15);
  --node-radius: 16px;

  /* 文字颜色 */
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.4);
  --text-accent: #00f5ff;

  /* 表单控件 */
  --input-bg: rgba(10, 10, 18, 1);
  --input-border: rgba(255, 255, 255, 0.1);
  --input-border-focus: rgba(0, 245, 255, 0.5);
  --input-shadow-focus: 0 0 20px rgba(0, 245, 255, 0.15), inset 0 0 20px rgba(0, 245, 255, 0.05);

  /* 按钮 */
  --btn-primary-bg: linear-gradient(135deg, #00f5ff 0%, #0066ff 100%);
  --btn-primary-text: #000000;
  --btn-secondary-bg: rgba(255, 255, 255, 0.05);
  --btn-secondary-text: #ffffff;

  /* 装饰效果 */
  --glow-primary: 0 0 20px rgba(0, 245, 255, 0.4);
  --accent-gradient: linear-gradient(135deg, #00f5ff 0%, #bf00ff 50%, #ff00aa 100%);

  /* 标签颜色 */
  --label-text: rgba(0, 245, 255, 0.8);
  --label-dot: #00f5ff;

  /* 分隔线 */
  --divider-color: rgba(255, 255, 255, 0.1);

  /* 字体 */
  --font-heading: 'Orbitron', 'Rajdhani', sans-serif;
  --font-body: 'Rajdhani', sans-serif;

  /* Neo-Cyber 专属变量 */
  --cyber-bg: #0a0a0f;
  --cyber-surface: rgba(15, 15, 25, 0.85);
  --cyber-surface-light: rgba(25, 25, 40, 0.9);
  --cyber-border: rgba(100, 100, 150, 0.2);
  --neon-cyan: #00f5ff;
  --neon-purple: #bf00ff;
  --neon-pink: #ff00aa;
  --neon-blue: #0066ff;
  --neon-green: #00ff88;
  --neon-orange: #ff6b00;
  --glow-cyan: 0 0 20px rgba(0, 245, 255, 0.4);
  --glow-purple: 0 0 20px rgba(191, 0, 255, 0.4);
  --glow-pink: 0 0 20px rgba(255, 0, 170, 0.4);
}

/* ========================================
   主题通用类
   ======================================== */

/* 主题字体类 */
.font-theme-heading {
  font-family: var(--font-heading);
}

.font-theme-body {
  font-family: var(--font-body);
}

/* 科技感字体类 (向后兼容) */
.font-cyber {
  font-family: 'Orbitron', 'Rajdhani', sans-serif;
}

.font-cyber-body {
  font-family: 'Rajdhani', sans-serif;
}

/* 主题节点样式 */
.theme-node {
  background: var(--node-bg);
  border: 1px solid var(--node-border);
  border-radius: var(--node-radius);
  box-shadow: var(--node-shadow);
  backdrop-filter: blur(var(--glass-blur, 0px));
  transition: all 0.3s ease;
}

.theme-node:hover {
  background: var(--node-bg-hover);
  border-color: var(--node-border-hover);
  box-shadow: var(--node-shadow-hover);
}

/* 主题输入框 */
.theme-input {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--text-primary);
  border-radius: 12px;
}

.theme-input:focus {
  border-color: var(--input-border-focus);
  box-shadow: var(--input-shadow-focus);
  outline: none;
}

/* 主题按钮 */
.theme-btn-primary {
  background: var(--btn-primary-bg);
  color: var(--btn-primary-text);
}

.theme-btn-secondary {
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-text);
}

/* 主题文字 */
.theme-text-primary {
  color: var(--text-primary);
}

.theme-text-secondary {
  color: var(--text-secondary);
}

.theme-text-tertiary {
  color: var(--text-tertiary);
}

.theme-text-accent {
  color: var(--text-accent);
}

/* 主题标签 */
.theme-label {
  color: var(--label-text);
  font-family: var(--font-heading);
}

/* 主题分隔线 */
.theme-divider {
  background: linear-gradient(to right, transparent, var(--divider-color), transparent);
}

/* 霓虹边框流动动画 */
@keyframes neon-border-flow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animate-neon-flow {
  background-size: 300% 300%;
  animation: neon-border-flow 4s ease infinite;
}

/* 脉冲发光动画 */
@keyframes neon-pulse {
  0%, 100% {
    opacity: 0.6;
    filter: blur(8px);
  }
  50% {
    opacity: 1;
    filter: blur(12px);
  }
}

.animate-neon-pulse {
  animation: neon-pulse 2s ease-in-out infinite;
}

/* 扫描线效果 */
@keyframes scanline {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

.cyber-scanline::before {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 245, 255, 0.03) 2px,
    rgba(0, 245, 255, 0.03) 4px
  );
  pointer-events: none;
  z-index: 1;
}

/* 网格背景纹理 */
.cyber-grid {
  background-image:
    linear-gradient(rgba(0, 245, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 245, 255, 0.03) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* 切角边框效果 */
.cyber-clip {
  clip-path: polygon(
    0 8px,
    8px 0,
    calc(100% - 8px) 0,
    100% 8px,
    100% calc(100% - 8px),
    calc(100% - 8px) 100%,
    8px 100%,
    0 calc(100% - 8px)
  );
}

.cyber-clip-lg {
  clip-path: polygon(
    0 12px,
    12px 0,
    calc(100% - 12px) 0,
    100% 12px,
    100% calc(100% - 12px),
    calc(100% - 12px) 100%,
    12px 100%,
    0 calc(100% - 12px)
  );
}

/* 角落装饰 */
.cyber-corner::before,
.cyber-corner::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  border: 2px solid var(--neon-cyan);
  opacity: 0.6;
}

.cyber-corner::before {
  top: -1px;
  left: -1px;
  border-right: none;
  border-bottom: none;
}

.cyber-corner::after {
  bottom: -1px;
  right: -1px;
  border-left: none;
  border-top: none;
}

/* 状态指示灯 */
@keyframes status-blink {
  0%, 100% { opacity: 1; box-shadow: 0 0 6px currentColor; }
  50% { opacity: 0.5; box-shadow: 0 0 2px currentColor; }
}

.cyber-status-light {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  animation: status-blink 2s ease-in-out infinite;
}

/* 数据流动画 */
@keyframes data-stream {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% {
    transform: translateX(100%);
    opacity: 0;
  }
}

.cyber-data-stream::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
  animation: data-stream 3s linear infinite;
}

/* 悬浮发光效果 */
.cyber-hover-glow {
  transition: all 0.3s ease;
}

.cyber-hover-glow:hover {
  box-shadow:
    0 0 20px rgba(0, 245, 255, 0.2),
    0 0 40px rgba(191, 0, 255, 0.1),
    inset 0 0 20px rgba(0, 245, 255, 0.05);
}

/* 输入框聚焦发光 */
.cyber-input-glow:focus {
  box-shadow:
    0 0 0 2px rgba(0, 245, 255, 0.3),
    0 0 20px rgba(0, 245, 255, 0.2),
    inset 0 0 10px rgba(0, 245, 255, 0.05);
  border-color: var(--neon-cyan);
}

/* 按钮霓虹效果 */
.cyber-button {
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.cyber-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 70%
  );
  transform: translateX(-100%);
  transition: transform 0.5s ease;
}

.cyber-button:hover::before {
  transform: translateX(100%);
}

.cyber-button:hover {
  box-shadow:
    0 0 20px rgba(0, 245, 255, 0.4),
    0 0 40px rgba(0, 245, 255, 0.2);
  transform: translateY(-2px);
}

/* 全息闪烁效果 */
@keyframes hologram-flicker {
  0%, 100% { opacity: 1; }
  92% { opacity: 1; }
  93% { opacity: 0.8; }
  94% { opacity: 1; }
  95% { opacity: 0.9; }
  96% { opacity: 1; }
}

.cyber-hologram {
  animation: hologram-flicker 4s ease-in-out infinite;
}

/* 加载时的旋转光环 */
@keyframes cyber-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.cyber-loading-ring {
  animation: cyber-rotate 2s linear infinite;
}

/* 手绘标签样式 */
.handwriting-label {
  font-family: 'Caveat', cursive;
  font-weight: 600;
}

:root {
  --background: #fdfbf7; /* Creamier white */
  --foreground: #4a4a4a; /* Softer black */

  /* Pastel Accents */
  --accent-purple: #e0c3fc;
  --accent-blue: #bde0fe;
  --accent-green: #d0f4de;
  --accent-orange: #ffdac1;
  --accent-pink: #ffcfd2;
  --accent-red: #ff9aa2;

  /* UI Theme Colors (for drawio components) */
  --card: #ffffff;
  --card-foreground: #4a4a4a;
  --popover: #ffffff;
  --popover-foreground: #4a4a4a;
  --primary: #8b5cf6;
  --primary-foreground: #ffffff;
  --secondary: #f3f4f6;
  --secondary-foreground: #1f2937;
  --muted: #f3f4f6;
  --muted-foreground: #6b7280;
  --accent: #f3e8ff;
  --accent-foreground: #6b21a8;
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --border: #e5e7eb;
  --input: #e5e7eb;
  --ring: #8b5cf6;
  --radius: 0.5rem;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --radius: var(--radius);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #1a1a1a;
    --foreground: #f0f0f0;

    /* Dark mode UI Theme Colors */
    --card: #1f1f1f;
    --card-foreground: #f0f0f0;
    --popover: #1f1f1f;
    --popover-foreground: #f0f0f0;
    --primary: #a78bfa;
    --primary-foreground: #1a1a1a;
    --secondary: #374151;
    --secondary-foreground: #f3f4f6;
    --muted: #374151;
    --muted-foreground: #9ca3af;
    --accent: #4c1d95;
    --accent-foreground: #e9d5ff;
    --destructive: #dc2626;
    --destructive-foreground: #ffffff;
    --border: #374151;
    --input: #374151;
    --ring: #a78bfa;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: "Nunito", "Rounded Mplus 1c", Arial, Helvetica, sans-serif; /* Trying to suggest a rounder font if available, falling back to Arial */
  -webkit-font-smoothing: antialiased;
}

/* Cute scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #e2e2e2;
  border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover {
  background: #d1d1d1;
}

/* ========================================
   性能优化
   ======================================== */

/* 节点容器 GPU 加速和重绘优化 */
.react-flow__node {
  will-change: transform;
  transform: translateZ(0);
  contain: layout style;
}

/* ========================================
   文本选择支持
   ======================================== */

/* 允许节点内文本选择 - 配合 nodrag 类使用 */
.selectable-text {
  user-select: text !important;
  -webkit-user-select: text !important;
  cursor: text;
}

/* 悬停时显示文本光标 */
.selectable-text:hover {
  cursor: text;
}

/* 选中状态的文本高亮颜色 */
.selectable-text::selection {
  background: rgba(139, 92, 246, 0.3);
  color: inherit;
}

/* 聊天消息区域默认允许选择 */
.react-flow__node .chat-message-content,
.react-flow__node .message-text {
  user-select: text !important;
  -webkit-user-select: text !important;
  cursor: text;
}

/* 拖动时禁用所有过渡效果以提升性能 */
.react-flow__node.dragging,
.react-flow__node.dragging * {
  transition: none !important;
  animation: none !important;
}

/* 缩放时优化渲染 */
.react-flow__viewport {
  will-change: transform;
}

/* React Flow Customization */
.react-flow__handle {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 3px solid white;
  /* 移除频繁的过渡效果 */
}

.react-flow__handle:hover {
  transform: scale(1.2);
}

.react-flow__node.selected .nowheel {
  box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.4);
  /* 移除 scale 变换，减少重绘 */
}

/* ========================================
   流式 UI 动画
   ======================================== */

/* Shimmer 流动光效动画 */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-shimmer {
  animation: shimmer 2s linear infinite;
  background-size: 200% 100%;
}

/* 慢速旋转动画 */
@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-spin-slow {
  animation: spin-slow 3s linear infinite;
}

/* 渐入动画 */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out forwards;
}

/* 滑入动画 */
@keyframes slide-up {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out forwards;
}

/* 缩放弹入动画 */
@keyframes scale-in {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.animate-scale-in {
  animation: scale-in 0.2s ease-out forwards;
}

/* 脉冲光晕动画 */
@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }
  50% { box-shadow: 0 0 20px 4px rgba(168, 85, 247, 0.2); }
}

.animate-glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* 渐变边框动画 */
@keyframes gradient-border {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animate-gradient-border {
  background-size: 200% 200%;
  animation: gradient-border 3s ease infinite;
}

/* 打字机光标闪烁 */
@keyframes cursor-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.animate-cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}

/* 终端光标闪烁 */
@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* 淡入动画 */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fadeIn {
  animation: fadeIn 0.2s ease-out forwards;
}

/* ========================================
   Liquid Chrome - 金属光泽效果
   ======================================== */

/* 金属光泽文字扫过动画 */
@keyframes shimmer-sweep {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

/* 金属质感文字 */
.text-chrome {
  background: linear-gradient(
    90deg,
    #71717a 0%,
    #a1a1aa 20%,
    #d4d4d8 35%,
    #fafafa 50%,
    #d4d4d8 65%,
    #a1a1aa 80%,
    #71717a 100%
  );
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmer-sweep 3s linear infinite;
}

/* 金属光泽卡片边框扫过 */
@keyframes border-shimmer {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.border-chrome {
  background: linear-gradient(
    90deg,
    rgba(212, 212, 216, 0.3) 0%,
    rgba(250, 250, 250, 0.8) 25%,
    rgba(212, 212, 216, 0.3) 50%,
    rgba(250, 250, 250, 0.8) 75%,
    rgba(212, 212, 216, 0.3) 100%
  );
  background-size: 200% 100%;
  animation: border-shimmer 4s ease-in-out infinite;
}

/* 玻璃拟态效果 */
.glass-panel {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.9) 0%,
    rgba(250, 250, 250, 0.7) 100%
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.8);
  box-shadow:
    0 4px 24px -1px rgba(0, 0, 0, 0.05),
    0 2px 8px -1px rgba(0, 0, 0, 0.03),
    inset 0 1px 0 rgba(255, 255, 255, 1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.02);
}

/* 内部高光效果 */
.inner-glow {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.9),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);
}

/* 流动光线动画 */
@keyframes light-flow {
  0% { transform: translateX(-100%) skewX(-15deg); }
  100% { transform: translateX(200%) skewX(-15deg); }
}

.light-sweep::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 100%
  );
  transform: translateX(-100%) skewX(-15deg);
  animation: light-flow 3s ease-in-out infinite;
}

/* 柔和脉冲光晕 */
@keyframes soft-pulse {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.02); }
}

.pulse-glow {
  animation: soft-pulse 2s ease-in-out infinite;
}

/* 波浪动画（用于音频可视化风格的指示器）*/
@keyframes wave {
  0%, 100% { transform: scaleY(0.5); }
  50% { transform: scaleY(1); }
}

.animate-wave {
  animation: wave 0.8s ease-in-out infinite;
}

/* 柔和浮动动画 */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* ========================================
   金属光线边框动画
   ======================================== */

/* 单条发光线旋转边框 - 金属质感（精简版，不向内渗透） */
.metallic-border-glow {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 3px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 300deg,
    rgba(56, 189, 248, 0.4) 320deg,
    rgba(59, 130, 246, 0.7) 335deg,
    rgba(147, 197, 253, 1) 345deg,
    rgba(255, 255, 255, 1) 355deg,
    rgba(147, 197, 253, 1) 365deg,
    rgba(59, 130, 246, 0.7) 375deg,
    rgba(56, 189, 248, 0.4) 390deg,
    transparent 400deg,
    transparent 360deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
}

/* 外发光层 - 只向外扩散 */
.metallic-border-glow::after {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: calc(inherit + 6px);
  border: 4px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 320deg,
    rgba(59, 130, 246, 0.6) 340deg,
    rgba(255, 255, 255, 0.9) 355deg,
    rgba(59, 130, 246, 0.6) 370deg,
    transparent 390deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
  filter: blur(4px);
}

@keyframes metallic-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 紫色版本 - 用于思考过程（精简版，不向内渗透） */
.metallic-border-glow-purple {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  /* 使用边框而非背景，避免向内渗透 */
  border: 3px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 300deg,
    rgba(139, 92, 246, 0.4) 320deg,
    rgba(168, 85, 247, 0.7) 335deg,
    rgba(196, 181, 253, 1) 345deg,
    rgba(255, 255, 255, 1) 355deg,
    rgba(196, 181, 253, 1) 365deg,
    rgba(168, 85, 247, 0.7) 375deg,
    rgba(139, 92, 246, 0.4) 390deg,
    transparent 400deg,
    transparent 360deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
}

/* 外发光层 - 只向外扩散 */
.metallic-border-glow-purple::after {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: calc(inherit + 6px);
  border: 4px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 320deg,
    rgba(168, 85, 247, 0.6) 340deg,
    rgba(255, 255, 255, 0.9) 355deg,
    rgba(168, 85, 247, 0.6) 370deg,
    transparent 390deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
  filter: blur(4px);
}

/* ========================================
   右侧面板滑入动画
   ======================================== */
@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.2s ease-out forwards;
}

/* ========================================
   PPT Generator - Liquid Mercury 美学
   ======================================== */

/* 全息彩虹边框 - 用于活跃状态 */
@keyframes holographic-shift {
  0%, 100% {
    background-position: 0% 50%;
    filter: hue-rotate(0deg);
  }
  25% {
    background-position: 50% 100%;
    filter: hue-rotate(45deg);
  }
  50% {
    background-position: 100% 50%;
    filter: hue-rotate(90deg);
  }
  75% {
    background-position: 50% 0%;
    filter: hue-rotate(45deg);
  }
}

.holographic-border {
  background: linear-gradient(
    135deg,
    rgba(139, 92, 246, 0.4) 0%,
    rgba(59, 130, 246, 0.4) 25%,
    rgba(16, 185, 129, 0.3) 50%,
    rgba(245, 158, 11, 0.3) 75%,
    rgba(139, 92, 246, 0.4) 100%
  );
  background-size: 300% 300%;
  animation: holographic-shift 6s ease-in-out infinite;
}

/* 数据流脉冲 - 工具运行时 */
@keyframes data-pulse {
  0% {
    transform: scaleX(0);
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  100% {
    transform: scaleX(1);
    opacity: 0;
  }
}

.data-flow-pulse::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(139, 92, 246, 0.3) 30%,
    rgba(168, 85, 247, 0.5) 50%,
    rgba(139, 92, 246, 0.3) 70%,
    transparent 100%
  );
  transform-origin: left center;
  animation: data-pulse 2s ease-out infinite;
}

/* 水银反射效果 */
@keyframes mercury-reflect {
  0%, 100% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
}

.mercury-surface {
  background: linear-gradient(
    145deg,
    rgba(250, 250, 250, 0.95) 0%,
    rgba(228, 228, 231, 0.8) 30%,
    rgba(244, 244, 245, 0.9) 50%,
    rgba(228, 228, 231, 0.7) 70%,
    rgba(250, 250, 250, 0.9) 100%
  );
  background-size: 200% 200%;
  animation: mercury-reflect 8s ease-in-out infinite;
}

/* 消息滑入动画 - 交错效果 */
@keyframes message-slide-in {
  0% {
    opacity: 0;
    transform: translateX(-12px) scale(0.96);
    filter: blur(4px);
  }
  100% {
    opacity: 1;
    transform: translateX(0) scale(1);
    filter: blur(0);
  }
}

.animate-message-in {
  animation: message-slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* 工具图标旋转 */
@keyframes tool-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-tool-spin {
  animation: tool-spin 2s linear infinite;
}

/* 微妙的噪点纹理叠加 */
.noise-texture {
  position: relative;
}

.noise-texture::after {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0.03;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}

/* PPT 预览卡片悬浮效果 */
@keyframes preview-float {
  0%, 100% {
    transform: translateY(0) rotateX(0);
    box-shadow:
      0 10px 30px -10px rgba(139, 92, 246, 0.2),
      0 5px 15px -5px rgba(0, 0, 0, 0.1);
  }
  50% {
    transform: translateY(-2px) rotateX(1deg);
    box-shadow:
      0 15px 40px -10px rgba(139, 92, 246, 0.25),
      0 8px 20px -5px rgba(0, 0, 0, 0.12);
  }
}

.preview-card-float {
  animation: preview-float 4s ease-in-out infinite;
}

/* 流光边框 - 用于 PPT 预览 */
@keyframes border-flow {
  0% { background-position: 0% 0%; }
  100% { background-position: 200% 0%; }
}

.flowing-border {
  background: linear-gradient(
    90deg,
    rgba(139, 92, 246, 0.3) 0%,
    rgba(59, 130, 246, 0.5) 25%,
    rgba(139, 92, 246, 0.3) 50%,
    rgba(168, 85, 247, 0.5) 75%,
    rgba(139, 92, 246, 0.3) 100%
  );
  background-size: 200% 100%;
  animation: border-flow 3s linear infinite;
}

/* 输入框焦点光晕 */
@keyframes input-glow {
  0%, 100% {
    box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.1);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.15);
  }
}

.input-focus-glow:focus {
  animation: input-glow 2s ease-in-out infinite;
}

/* 发送按钮脉冲 */
@keyframes send-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4);
  }
  50% {
    transform: scale(1.02);
    box-shadow: 0 0 0 6px rgba(139, 92, 246, 0);
  }
}

.send-button-ready {
  animation: send-pulse 2s ease-in-out infinite;
}
