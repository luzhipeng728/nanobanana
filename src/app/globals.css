/* 手绘风格字体 - Google Fonts 导入必须在最前面 */
@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&display=swap');

@import "tailwindcss";
@import '@xyflow/react/dist/style.css';

/* 手绘标签样式 */
.handwriting-label {
  font-family: 'Caveat', cursive;
  font-weight: 600;
}

:root {
  --background: #fdfbf7; /* Creamier white */
  --foreground: #4a4a4a; /* Softer black */
  
  /* Pastel Accents */
  --accent-purple: #e0c3fc;
  --accent-blue: #bde0fe;
  --accent-green: #d0f4de;
  --accent-orange: #ffdac1;
  --accent-pink: #ffcfd2;
  --accent-red: #ff9aa2;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #1a1a1a;
    --foreground: #f0f0f0;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: "Nunito", "Rounded Mplus 1c", Arial, Helvetica, sans-serif; /* Trying to suggest a rounder font if available, falling back to Arial */
  -webkit-font-smoothing: antialiased;
}

/* Cute scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #e2e2e2;
  border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover {
  background: #d1d1d1;
}

/* ========================================
   性能优化
   ======================================== */

/* 节点容器 GPU 加速和重绘优化 */
.react-flow__node {
  will-change: transform;
  transform: translateZ(0);
  contain: layout style;
}

/* 拖动时禁用所有过渡效果以提升性能 */
.react-flow__node.dragging,
.react-flow__node.dragging * {
  transition: none !important;
  animation: none !important;
}

/* 缩放时优化渲染 */
.react-flow__viewport {
  will-change: transform;
}

/* React Flow Customization */
.react-flow__handle {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 3px solid white;
  /* 移除频繁的过渡效果 */
}

.react-flow__handle:hover {
  transform: scale(1.2);
}

.react-flow__node.selected .nowheel {
  box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.4);
  /* 移除 scale 变换，减少重绘 */
}

/* ========================================
   流式 UI 动画
   ======================================== */

/* Shimmer 流动光效动画 */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-shimmer {
  animation: shimmer 2s linear infinite;
  background-size: 200% 100%;
}

/* 慢速旋转动画 */
@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-spin-slow {
  animation: spin-slow 3s linear infinite;
}

/* 渐入动画 */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out forwards;
}

/* 滑入动画 */
@keyframes slide-up {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out forwards;
}

/* 缩放弹入动画 */
@keyframes scale-in {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.animate-scale-in {
  animation: scale-in 0.2s ease-out forwards;
}

/* 脉冲光晕动画 */
@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4); }
  50% { box-shadow: 0 0 20px 4px rgba(168, 85, 247, 0.2); }
}

.animate-glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* 渐变边框动画 */
@keyframes gradient-border {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animate-gradient-border {
  background-size: 200% 200%;
  animation: gradient-border 3s ease infinite;
}

/* 打字机光标闪烁 */
@keyframes cursor-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.animate-cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}

/* 波浪动画（用于音频可视化风格的指示器）*/
@keyframes wave {
  0%, 100% { transform: scaleY(0.5); }
  50% { transform: scaleY(1); }
}

.animate-wave {
  animation: wave 0.8s ease-in-out infinite;
}

/* 柔和浮动动画 */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* ========================================
   金属光线边框动画
   ======================================== */

/* 单条发光线旋转边框 - 金属质感（精简版，不向内渗透） */
.metallic-border-glow {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 3px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 300deg,
    rgba(56, 189, 248, 0.4) 320deg,
    rgba(59, 130, 246, 0.7) 335deg,
    rgba(147, 197, 253, 1) 345deg,
    rgba(255, 255, 255, 1) 355deg,
    rgba(147, 197, 253, 1) 365deg,
    rgba(59, 130, 246, 0.7) 375deg,
    rgba(56, 189, 248, 0.4) 390deg,
    transparent 400deg,
    transparent 360deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
}

/* 外发光层 - 只向外扩散 */
.metallic-border-glow::after {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: calc(inherit + 6px);
  border: 4px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 320deg,
    rgba(59, 130, 246, 0.6) 340deg,
    rgba(255, 255, 255, 0.9) 355deg,
    rgba(59, 130, 246, 0.6) 370deg,
    transparent 390deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
  filter: blur(4px);
}

@keyframes metallic-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 紫色版本 - 用于思考过程（精简版，不向内渗透） */
.metallic-border-glow-purple {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  /* 使用边框而非背景，避免向内渗透 */
  border: 3px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 300deg,
    rgba(139, 92, 246, 0.4) 320deg,
    rgba(168, 85, 247, 0.7) 335deg,
    rgba(196, 181, 253, 1) 345deg,
    rgba(255, 255, 255, 1) 355deg,
    rgba(196, 181, 253, 1) 365deg,
    rgba(168, 85, 247, 0.7) 375deg,
    rgba(139, 92, 246, 0.4) 390deg,
    transparent 400deg,
    transparent 360deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
}

/* 外发光层 - 只向外扩散 */
.metallic-border-glow-purple::after {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: calc(inherit + 6px);
  border: 4px solid transparent;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 320deg,
    rgba(168, 85, 247, 0.6) 340deg,
    rgba(255, 255, 255, 0.9) 355deg,
    rgba(168, 85, 247, 0.6) 370deg,
    transparent 390deg
  ) border-box;
  -webkit-mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) padding-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: metallic-spin 4s linear infinite;
  filter: blur(4px);
}
